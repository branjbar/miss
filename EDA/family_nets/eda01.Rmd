---
title: "family Network EDA"
author: "Bijan Ranjbar-Sahraei"
date: "October 25, 2015"
output: html_document
---

A simple R markdown to do exploratory data analysis on Family Networks.

# Import Data
We start by importing the first csv file.

*Please not that I had to add a "no" column to this csv file.*
```{r}
file_name <- "/Users/bian/Dropbox/CATCH_Local/network_data/family_networks_1.csv"
raw_data <- read.csv(file_name,sep=';')
```

Here are columns of *raw_data*
```{r}
colnames(raw_data)
```

Now let's leave out the part of data we don't need and keep the rest in *data*
```{r}
data <- raw_data[,c("network_no","source","target")]
head(data)
```

# Statistics

Let's get the number of edges in each network

```{r}
network.size.edges <- matrix(table(data$network_no))
head(network.size.edges)
summary(network.size.edges)
```
So, in average, each network has 19.74 edges. The smallest network has 9 edges and the largest one has 26 edges.

*Assumption -* For now we assume that our networks don't have any cycle. Therefore, it's easy to show that the number of nodes in a cycle-free network is *number of edges - 1*. So, the size of networks is in average 18.74.

Let's draw a histogram.

```{r}
library(ggplot2)
ggplot(data, aes(x=network_no)) + geom_histogram(aes(fill = ..count..),binwidth = 1) + scale_fill_gradient("Count", low = "green", high = "red") + labs(x = "Number of Edges")
```

Now it's time to build graphs and compute the degree of each graph, etc.

# Analysis of Networks one-by-one 

Let's first focus on *i=1* for the first network and find the list of nodes and list of edges.

```{r, message=FALSE} 
  library(igraph)  # let's install igraph
```
```{r}
  i <- 1 
  network <- subset(data,network_no == i)
  attach(network)
  
  source  # the list of source nodes
  target # the list of target nodes
  set.nodes <- unique(append(source, target))  # merge sources and targets and get the unique list of ndoes
  size.nodes <- length(set.nodes)  # number of nodes
  
  edges <- data.frame(from=source, to=target)  # the list of edges
  g <- graph.data.frame(edges, directed=TRUE)  # define a new graph
  plot(g,edge.arrow.size=0.5)  # visualize the graph
  detach(network)
```

Now, it's time to extract the statistics, such as number of nodes, number of edges, distribution of degrees, diameter of the graph, 

